{"version":3,"sources":["img/place-holder.png","components/LazyLoadImage.js","App.js","index.js"],"names":["module","exports","LazyLoadImage","props","state","loaded","handleScrollPage","bind","this","window","addEventListener","removeEventListener","el","rect","getBoundingClientRect","top","bottom","innerHeight","document","documentElement","clientHeight","elementInViewport","imgEle","imgLoader","Image","src","onload","ratioWH","width","height","setAttribute","keepRatio","classList","add","setState","ImgMask","ref","className","alt","Component","App","useState","listImage","setListImage","useEffect","a","fetch","then","res","json","listImg","fetchImg","map","img","index","key","download_url","author","ReactDOM","render","StrictMode","getElementById"],"mappings":"2GAAAA,EAAOC,QAAU,kM,kRCmBIC,E,kDACjB,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,CACTC,QAAQ,GAGZ,EAAKC,iBAAmB,EAAKA,iBAAiBC,KAAtB,gBANT,E,gEAUfC,KAAKF,mBACLG,OAAOC,iBAAiB,SAAUF,KAAKF,oB,6CAIvCG,OAAOE,oBAAoB,SAAUH,KAAKF,oB,yCAG1B,IAAD,OACf,IAAKE,KAAKJ,MAAMC,QAlCE,SAACO,GACvB,IAAIC,EAAOD,EAAGE,wBAChB,OACGD,EAAKE,KAAO,GACRF,EAAKG,QAAU,GAEnBH,EAAKG,SAAWP,OAAOQ,aAAeC,SAASC,gBAAgBC,eAC9DP,EAAKE,MAAQN,OAAOQ,aAAeC,SAASC,gBAAgBC,eAE7DP,EAAKE,KAAO,GACXF,EAAKG,SAAWP,OAAOQ,aAAeC,SAASC,gBAAgBC,cAwBnCC,CAAkBb,KAAKc,QAAS,CAEtD,IAAMC,EAAY,IAAIC,MACtBD,EAAUE,IAAMjB,KAAKL,MAAMsB,IAC3BF,EAAUG,OAAS,WACf,IAAMC,EAAUJ,EAAUK,MAAQL,EAAUM,OAE5C,EAAKP,OAAOQ,aAAa,MAAO,EAAK3B,MAAMsB,KAE3C,EAAKtB,MAAM4B,WAAa,EAAKT,OAAOQ,aAAa,SAAzB,UAAsC,EAAK3B,MAAMyB,MAAQD,IAEjF,EAAKL,OAAOU,UAAUC,IAAI,WAE1B,EAAKC,SAAS,CAAE7B,QAAQ,Q,+BAK1B,IAAD,OACCuB,EAAQpB,KAAKL,MAAMyB,OAAS,OAC5BC,EAASrB,KAAKL,MAAM0B,QAAU,OAEpC,OACI,yBACIJ,IAAKU,IACLP,MAAOA,EACPC,OAAQA,EACRO,IAAK,SAAAd,GAAM,OAAI,EAAKA,OAASA,GAC7Be,UAAU,aACVC,IAAK9B,KAAKL,MAAMmC,U,GAjDWC,aCiB5BC,MA9Bf,WAAgB,IAAD,EACqBC,mBAAS,IAD9B,mBACNC,EADM,KACKC,EADL,KAWb,OATAC,qBAAU,YACM,uCAAG,4BAAAC,EAAA,sEACKC,MAAM,iCAAiCC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAD5D,OACXC,EADW,OAEfP,EAAaO,GAFE,2CAAH,qDAKdC,KACC,IAGC,yBAAKd,UAAU,OACX,yBAAKA,UAAU,UACb,+CAEF,yBAAKA,UAAU,OACZK,EAAUU,KAAI,SAACC,EAAKC,GAAN,OACb,yBAAKC,IAAKD,EAAOjB,UAAU,OACzB,kBAAC,EAAD,CACEZ,IAAK4B,EAAIG,aACTlB,IAAKe,EAAII,gBCtB3BC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEF1C,SAAS2C,eAAe,W","file":"static/js/main.1d1415eb.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqIAAAGAAQMAAABMQ5IQAAAAA1BMVEX///+nxBvIAAAANklEQVR42u3BAQEAAACCoP6vbojAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIC8A4EAAAFVQt90AAAAAElFTkSuQmCC\"","import React, { Component } from 'react'\r\n\r\nimport './LazyLoadImage.css'\r\nimport ImgMask from '../img/place-holder.png'\r\n\r\nconst elementInViewport = (el) => {\r\n    var rect = el.getBoundingClientRect();\r\n  return (\r\n    (rect.top <= 0\r\n      && rect.bottom >= 0)\r\n    ||\r\n    (rect.bottom >= (window.innerHeight || document.documentElement.clientHeight) &&\r\n      rect.top <= (window.innerHeight || document.documentElement.clientHeight))\r\n    ||\r\n    (rect.top >= 0 &&\r\n      rect.bottom <= (window.innerHeight || document.documentElement.clientHeight))\r\n  );\r\n}\r\n\r\nexport default class LazyLoadImage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            loaded: false\r\n        }\r\n\r\n        this.handleScrollPage = this.handleScrollPage.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.handleScrollPage();\r\n        window.addEventListener('scroll', this.handleScrollPage);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('scroll', this.handleScrollPage);\r\n    }\r\n\r\n    handleScrollPage() {\r\n        if (!this.state.loaded && elementInViewport(this.imgEle)) {\r\n            // Load img\r\n            const imgLoader = new Image();\r\n            imgLoader.src = this.props.src;\r\n            imgLoader.onload = () => {\r\n                const ratioWH = imgLoader.width / imgLoader.height;\r\n\r\n                this.imgEle.setAttribute('src', this.props.src);\r\n\r\n                this.props.keepRatio && this.imgEle.setAttribute('height', `${this.props.width / ratioWH}`);\r\n\r\n                this.imgEle.classList.add('opacity');\r\n\r\n                this.setState({ loaded: true });\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const width = this.props.width || '100%';\r\n        const height = this.props.height || '100%';\r\n\r\n        return (\r\n            <img \r\n                src={ImgMask} \r\n                width={width}\r\n                height={height}\r\n                ref={imgEle => this.imgEle = imgEle}\r\n                className=\"lazy-image\"\r\n                alt={this.props.alt}\r\n            />\r\n        )\r\n    }\r\n}\r\n","import React, { useEffect, useState } from 'react';\nimport './App.css';\n\nimport LazyLoadImage from './components/LazyLoadImage'\n\n\nfunction App() {\n  const [listImage, setListImage] = useState([]);\n  useEffect(() => {\n    const fetchImg = async () => {\n      let listImg = await fetch('https://picsum.photos/v2/list').then(res => res.json());\n      setListImage(listImg);\n    }\n\n    fetchImg();\n  }, []);\n  \n  return (\n      <div className=\"App\">\n          <div className=\"scroll\">\n            <h1>Lazyload image</h1>\n          </div>\n          <div className=\"img\">\n            {listImage.map((img, index) => (\n              <div key={index} className=\"box\">\n                <LazyLoadImage\n                  src={img.download_url}\n                  alt={img.author}\n                />\n              </div>\n              ))}\n          </div>\n      </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}